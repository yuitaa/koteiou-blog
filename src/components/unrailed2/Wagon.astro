---
import { wagonImages } from '@/utils/image.mjs';
import { Image } from 'astro:assets';
const { wagon, baseLevel, levelText: level } = Astro.props;
const imagePath = baseLevel
  ? `/src/assets/unrailed2/wagons/${baseLevel}/${wagon}_s${baseLevel}.png`
  : `/src/assets/unrailed2/wagons/engine/${wagon}_s.png`;

interface Props {
  wagon: string;
  baseLevel?: number;
  levelText?: string;
}

const wagonImage = (await wagonImages[imagePath]()) as {
  default: ImageMetadata;
};
---

<div class="relative w-20 flex-shrink-0 lg:flex-shrink">
  <div class="grid grid-flow-row grid-cols-2"><slot /></div>
  <Image src={wagonImage.default} alt={wagon} class="m-0" />
  {
    level && (
      <div class="bg-background-surface/50 absolute right-0 bottom-0 px-1">
        {level}
      </div>
    )
  }
</div>
